server:
  port: 8080
  read_timeout: 10s
  write_timeout: 10s
  idle_timeout: 60s

services:
  auth:
    url: "http://localhost:8001"
    timeout: 5s
    
  merchant:
    url: "http://localhost:8002"
    timeout: 10s
    
  payment:
    url: "http://localhost:8004"
    timeout: 30s

rate_limiting:
  enabled: true
  storage: "memory"  # or "redis"
  redis_url: "redis://localhost:6379/6"
  
  global:
    requests_per_hour: 1000
    
  endpoints:
    - pattern: "/api/v1/auth/login"
      requests_per_minute: 5
      by: "ip"
      
    - pattern: "/api/v1/auth/register"
      requests_per_hour: 3
      by: "ip"
      
    - pattern: "/api/v1/payments/*"
      requests_per_second: 20
      by: "api_key"

circuit_breaker:
  enabled: true
  
  auth_service:
    failure_threshold: 5
    timeout: 30s
    success_threshold: 2
    
  merchant_service:
    failure_threshold: 5
    timeout: 30s
    success_threshold: 2
    
  payment_service:
    failure_threshold: 3
    timeout: 15s
    success_threshold: 3


logging:
  level: "info"
  format: "json"
  output: "stdout"

metrics:
  enabled: true
  port: 9090
  path: "/metrics"